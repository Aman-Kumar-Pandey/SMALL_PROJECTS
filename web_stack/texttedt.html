<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TEXT EDITOR</title>
  <style>
    body {
      position: relative;
      height: auto;
      font-family: Arial, sans-serif;
      padding: 5px;
      min-height: 95vh;
      overflow-y: scroll;
      scrollbar-width: 0px;
      -ms-overflow-style: none;
      -webkit-overflow-scrolling: touch;
      margin: 0 0;
    }

    body::-webkit-scrollbar {
      display: none;
    }

    h1 {
      color: #007bff;
      margin: 0 0;
    }

    .enemy {
      overflow: auto;
      resize: none;
      width: 60vw;
      max-width: 800px;
      height: 50vh;
      margin: 10px;
      padding: 5vw;
      font-size: large;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
      background-color: #f9f9f9;
      border: 10px solid #555;
      border-radius: 50px;
      text-align: left;
      color: black;
      justify-self: center;
      align-self: center;
    }

    .mayank {
      text-align: left;
      justify-self: center;
      align-self: center;
      margin: 0;
      padding: 0;
    }

    .orange {
      text-align: left;
      justify-self: center;
      align-self: center;
      justify-content: center;
      align-content: center;
      align-items: center;
      justify-items: center;
      margin: 0;
    }

    .class {
      width: 7vw;
      height: 4vh;
      text-align: center;
      background-color: black;
      color: #f9f9f9;
    }

    .hammer {
      width: 7vw;
      height: 4vh;
      text-align: center;
      background-color: black;
      color: #f9f9f9;
      font-size: x-small;
    }

    .school {
      margin-top: 1%;
      margin-bottom: 1%;
      justify-self: center;
      align-self: center;
      justify-content: center;
      align-content: center;
      align-items: center;
      justify-items: center;
      border-style: solid;
      background-color: #007bff;
      padding: 1%;
    }

    .nippi {
      border-style: solid;
      margin-top: 5px;
      background-color: #007bff;
      justify-self: center;
      align-self: center;
      justify-content: center;
      align-content: center;
      align-items: center;
      justify-items: center;
    }

    #omega {
      text-align: left;
      justify-self: center;
      align-self: center;
      justify-content: center;
      align-content: center;
      align-items: center;
      justify-items: center;
    }

    #editory {
      width: 20vw;
      align-items: baseline;
      margin-top: 5%;
      background-color: #007bff;
      color: black;
      text-align: center;
      margin-right: 1vw;
    }

    #editorx {
      width: 20vw;
      align-items: baseline;
      margin-top: 5%;
      background-color: #007bff;
      color: black;
      text-align: center;
      margin-left: 1vw;
    }

    #editorx::placeholder {
      font-size: xx-small;
    }

    .emoji-bar {
      margin: 2%;
      background-color: #007bff;
      border-style: solid;
      padding: 1%;
      text-align: left;
      justify-self: center;
      align-self: center;
      justify-content: center;
      align-content: center;
      align-items: center;
      justify-items: center;
    }

    .fool {
      position: absolute;
      top: 55%;
      right: 0px;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 30px;
      z-index: 9999;
      padding: 0px;
    }

    .fool input[type="range"],
    .fool input[type="color"] {
      writing-mode: vertical-lr;
      width: 20px;
      height: 4%px;
      cursor: pointer;
      border: none;
      outline: none;
    }

    #pio {
      border-radius: 50%;
      width: 20px;
      height: 20px;
      border-style: none;
      margin: 0 0;
      position: sticky;
    }

    #ax {
      transform: rotate(180deg);
    }

    #floatCopy {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 9999;
  padding: 10px 15px;
  font-size: 15px;
  border-radius: 50%;
  background-color: #4caf50;
  color: white;
  border: none;
  cursor: pointer;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
}

  </style>
</head>

<body>

  <div class="mayank">
    <div class="orange">
      <h1>TEXT EDITOR</h1>
    </div>
  </div>

  <div class="nippi">Format Tab</div>
  <div class="school">
    <button onclick="formatTextGeneric('b')" class="class"><b>A</b></button>
    <button onclick="formatTextGeneric('i')" class="class"><i>A</i></button>
    <button onclick="formatTextGeneric('code')" class="class"><code>A</code></button>
    <button onclick="formatTextGeneric('u')" class="class"><u>A</u></button>
    <button onclick="formatTextGeneric('sup')" class="class"><span class="sup-fake">A</span></button>
    <button onclick="formatTextGeneric('sub')" class="class"><sub>A</sub></button>
    <button onclick="formatTextGeneric('s')" class="class"><s>A</s></button>
    <button onclick="formatTextGeneric('mark')" class="class"><mark>A</mark></button>
  </div>

  <div contenteditable="True" class="enemy"></div>

  <div class="emoji-bar">
    <button class="hammer" type="button" onclick="aFunction()">‚û°Ô∏è</button>
    <button class="hammer" type="button" onclick="bFunction()">‚¨ÖÔ∏è</button>
    <button class="hammer" type="button" onclick="cFunction()">‚¨ÜÔ∏è</button>
    <button class="hammer" type="button" onclick="dFunction()">‚¨áÔ∏è</button>
    <button onclick="lb()" class="hammer">‚Ü©Ô∏è</button>
    <button onclick="clearFormatting()" type="button" class="hammer">‚úñÔ∏è</button>
    <button onclick="clearEverything()" type="button" class="hammer">‚ùå</button>
  </div>

  <div class="emoji-bar">
    <select id="fof" class="emoji-bar">
      <option value="inherit">Default</option>
      <option value="Arial">Arial</option>
      <option value="Helvetica">Helvetica</option>
      <option value="Courier New">Courier New</option>
      <option value="Georgia">Georgia</option>
      <option value="Times New Roman">Times New Roman</option>
      <option value="Verdana">Verdana</option>
      <option value="Trebuchet MS">Trebuchet MS</option>
      <option value="Lucida Console">Lucida Console</option>
      <option value="monospace">Monospace</option>
      <option value="Comic Sans MS">Comic Sans MS</option>
      <option value="fantasy">Fantasy</option>
      <option value="cursive">Cursive</option>
      <option value="gill-sans">Gill-sans</option>
    </select>
  </div>

  <div id="omega">
    <input id="editory" placeholder="WORDS HERE " disabled />
    <input id="editorx" placeholder=" CHARCATERS  HERE" disabled />
  </div>

  <div class="fool">
    <input type="color" class="mac" id="pio" />
    <input type="range" class="mac" min="8" max="72" value="16" step="1" id="ax" />
  </div>

 <button id="floatCopy" onclick="downloadAsHTML()">üíæ</button>



 <script>


const editor = document.querySelector('.enemy');

const wordOutput = document.getElementById('editory');

const charOutput = document.getElementById('editorx');

editor.addEventListener('input', () => {
  const text = editor.innerText.trim();
  wordOutput.value = text === "" ? 0 : text.split(/\s+/).length;
  charOutput.value = text.length;
});


function downloadAsHTML() { //this function is made by chatGPT
  const content = document.querySelector(".enemy").innerHTML;
  const fullHTML = `
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>Downloaded Content</title>
      <style>
        body {
          font-family: Arial, sans-serif;
          padding: 20px;
        }
      </style>
    </head>
    <body>${content}</body>
    </html>
  `;

  const blob = new Blob([fullHTML], { type: "text/html" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "new.html";
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
}



function clearEverything() {
  if (confirm("Clear all text? This cannot be undone.")) {
    const editor = document.querySelector(".enemy");

    // Clear all text and reset styles
    editor.innerHTML = "";
    editor.style.fontFamily = `-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif`;
    editor.style.color = "black";
    editor.style.fontSize = "large";
    editor.style.textAlign = "left";

    // Clear word/char counters
    document.getElementById('editory').value = '';
    document.getElementById('editorx').value = '';

    // Reset UI controls
    document.getElementById("ax").value = 16;
    document.getElementById("pio").value = "#000000";
    document.getElementById("fof").value = "inherit";
  }
}

document.getElementById("pio").addEventListener("input", function () {
  const clr = this.value;
  const ed = document.querySelector(".enemy");
  const sel = window.getSelection();
  ed.focus();

  if (sel.rangeCount > 0 && !sel.isCollapsed) {
    const rng = sel.getRangeAt(0);
    const frag = rng.extractContents();

    const sp = document.createElement("span");
    sp.style.color = clr;
    sp.appendChild(frag);

    rng.insertNode(sp);
    sel.removeAllRanges();
  } else {
     ed.querySelectorAll('[style]').forEach(el => {
    el.style.removeProperty("color");
    if (el.getAttribute("style")?.trim() === "") el.removeAttribute("style");
  });

  // Wrap entire content in a new span with selected color
  const span = document.createElement("span");
  span.style.color = clr;
  span.innerHTML = ed.innerHTML;
  ed.innerHTML = "";
  ed.appendChild(span);
  ed.focus();
  }
});

document.getElementById("ax").addEventListener("input", function () {
  const clr = this.value + "px";
  const ed = document.querySelector(".enemy");
  const sel = window.getSelection();
  ed.focus();

  if (sel.rangeCount > 0 && !sel.isCollapsed) {
    const rng = sel.getRangeAt(0);
    const frag = rng.extractContents();

    const sp = document.createElement("span");
    sp.style.fontSize = clr;
    sp.appendChild(frag);

    rng.insertNode(sp);
    sel.removeAllRanges();
  } else {
    ed.querySelectorAll('[style]').forEach(el => {
    el.style.removeProperty("font-size");
    if (el.getAttribute("style")?.trim() === "") el.removeAttribute("style");
  });

  const span = document.createElement("span");
  span.style.fontSize = clr;
  span.innerHTML = ed.innerHTML;
  ed.innerHTML = "";
  ed.appendChild(span);
  ed.focus();
  }
});

document.getElementById("fof").addEventListener("change", function () {
  const fam = this.value;
  const ed = document.querySelector(".enemy");
  const sel = window.getSelection();
  ed.focus();

  if (sel.rangeCount > 0 && !sel.isCollapsed) {
    const rng = sel.getRangeAt(0);
    const frag = rng.extractContents();

    const sp = document.createElement("span");
    sp.style.fontFamily = fam;
    sp.appendChild(frag);

    rng.insertNode(sp);
    sel.removeAllRanges();
  } else {
    ed.querySelectorAll('[style]').forEach(el => {
    el.style.removeProperty("font-family");
    if (el.getAttribute("style")?.trim() === "") el.removeAttribute("style");
  });

  // Wrap entire content in a new span with selected font family
  const span = document.createElement("span");
  span.style.fontFamily = fam;
  span.innerHTML = ed.innerHTML;
  ed.innerHTML = "";
  ed.appendChild(span);
  ed.focus();
  }
});


function clearFormatting() {
  const editor = document.querySelector('.enemy');

  // Reset editor's own font family
  editor.style.fontFamily = `-apple-system, BlinkMacSystemFont, "Segoe UI",
    Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif`;

  // Remove formatting tags
  editor.innerHTML = editor.innerHTML
    .replace(/<(\/)?(b|i|u|s|code|mark|sup|sub|span)>/gi, '');

  // Remove inline styles from all child elements
  editor.style.color = "black" ;
  editor.style.fontSize = "large" ;
   editor.style.textAlign = "left" ;
  editor.querySelectorAll('[style]').forEach(el => el.removeAttribute('style'));
  document.getElementById("ax").value = 16;
  document.getElementById("pio").value = "#000000";
  document.getElementById("fof").value = "inherit";



}


function lb() {
  const sel = window.getSelection();
  if (!sel.rangeCount) return;

  const range = sel.getRangeAt(0);
  range.deleteContents();

  const br = document.createElement("br");

  range.insertNode(br);

  
  range.setStartAfter(br);
  range.collapse(true);
  sel.removeAllRanges();
  sel.addRange(range);
}

function formatTextGeneric(tagName) {
  const editor = document.querySelector(".enemy");
  const selection = window.getSelection();
  editor.focus();

  if (selection.rangeCount > 0 && !selection.isCollapsed) {
    const range = selection.getRangeAt(0);
    const selectedText = range.extractContents();

    // Remove existing formatting if any
    const cleanedText = document.createElement("span");
    cleanedText.innerHTML = selectedText.textContent;

    const el = document.createElement(tagName);
    el.textContent = cleanedText.textContent;

    range.insertNode(el);
    selection.removeAllRanges();
  } else {
  const tag = document.createElement(tagName);
  tag.innerHTML = editor.innerHTML;
  editor.innerHTML = "";
  editor.appendChild(tag);
}

  }


function aFunction() {
  document.querySelector(".enemy").style.textAlign = "right"; // ‚û°Ô∏è
}

function bFunction() {
  document.querySelector(".enemy").style.textAlign = "left"; // ‚¨ÖÔ∏è
}

function cFunction() {
  document.querySelector(".enemy").style.textAlign = "center"; // ‚¨ÜÔ∏è
}

function dFunction() {
  document.querySelector(".enemy").style.textAlign = "justify"; // ‚¨áÔ∏è
}



</script>


</body>
</html>
